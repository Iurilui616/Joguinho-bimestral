<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üåü ACADEMIA DOS MESTRES SUPREMOS - EDI√á√ÉO DEFINITIVA üåü</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Creepster&family=Cinzel:wght@400;600;900&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Orbitron', monospace;
            background: #000;
            color: #fff;
            overflow-x: hidden;
            min-height: 100vh;
            cursor: crosshair;
        }

        .game-container {
            width: 100vw;
            min-height: 100vh;
            position: relative;
            background:
                radial-gradient(circle at 20% 20%, rgba(255,0,128,0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(0,255,128,0.3) 0%, transparent 50%),
                radial-gradient(circle at 50% 10%, rgba(128,0,255,0.3) 0%, transparent 50%),
                radial-gradient(circle at 10% 90%, rgba(255,128,0,0.3) 0%, transparent 50%),
                linear-gradient(135deg, #0a0a0a, #1a0a1a, #0a1a0a, #1a1a0a);
            background-size: 400% 400%;
            animation: cosmicGradient 20s ease infinite;
        }

        @keyframes cosmicGradient {
            0%, 100% { background-position: 0% 50%; }
            25% { background-position: 100% 0%; }
            50% { background-position: 100% 100%; }
            75% { background-position: 0% 100%; }
        }

        .particle-system {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .particle {
            position: absolute;
            border-radius: 50%;
            animation: particleFloat 15s linear infinite;
        }

        @keyframes particleFloat {
            0% {
                transform: translateY(100vh) translateX(0) rotate(0deg) scale(0);
                opacity: 0;
            }
            10% {
                opacity: 1;
                transform: translateY(90vh) translateX(20px) rotate(45deg) scale(1);
            }
            90% {
                opacity: 1;
                transform: translateY(10vh) translateX(200px) rotate(315deg) scale(1);
            }
            100% {
                transform: translateY(-10vh) translateX(250px) rotate(360deg) scale(0);
                opacity: 0;
            }
        }

        .main-menu {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            text-align: center;
            position: relative;
            background: radial-gradient(ellipse at center, rgba(26,0,51,0.8), rgba(0,0,0,0.9));
            backdrop-filter: blur(10px);
        }

        .game-title {
            font-family: 'Cinzel', serif;
            font-size: clamp(2rem, 8vw, 5rem);
            font-weight: 900;
            background: linear-gradient(45deg, #ff0080, #8000ff, #0080ff, #00ff80, #ff8000);
            background-size: 400% 400%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: epicRainbow 3s ease-in-out infinite;
            margin-bottom: 1rem;
            text-shadow: 0 0 50px rgba(255,255,255,0.5);
            position: relative;
        }

        .game-title::before,
        .game-title::after {
            content: 'üåü';
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            font-size: 2rem;
            animation: starRotate 4s linear infinite;
        }

        .game-title::before {
            left: -60px;
        }

        .game-title::after {
            right: -60px;
            animation-direction: reverse;
        }

        @keyframes epicRainbow {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        @keyframes starRotate {
            from { transform: translateY(-50%) rotate(0deg); }
            to { transform: translateY(-50%) rotate(360deg); }
        }

        .subtitle {
            font-size: clamp(1rem, 3vw, 1.8rem);
            margin-bottom: 3rem;
            background: linear-gradient(45deg, #ff6666, #66ff66, #6666ff);
            background-size: 200% 200%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: subtitleGlow 2s ease-in-out infinite;
        }

        @keyframes subtitleGlow {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        .menu-buttons {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .menu-btn {
            padding: 1.5rem 3rem;
            font-size: clamp(1rem, 2.5vw, 1.4rem);
            font-weight: bold;
            background: linear-gradient(45deg, #ff0080, #8000ff, #0080ff);
            background-size: 300% 300%;
            border: 3px solid transparent;
            border-radius: 20px;
            color: white;
            cursor: pointer;
            transition: all 0.4s ease;
            font-family: inherit;
            text-transform: uppercase;
            letter-spacing: 2px;
            position: relative;
            overflow: hidden;
            box-shadow: 0 0 30px rgba(255,0,128,0.4);
            animation: menuBtnGlow 3s ease-in-out infinite;
        }

        @keyframes menuBtnGlow {
            0%, 100% {
                background-position: 0% 50%;
                box-shadow: 0 0 30px rgba(255,0,128,0.4);
            }
            50% {
                background-position: 100% 50%;
                box-shadow: 0 0 50px rgba(128,0,255,0.6);
            }
        }

        .menu-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: left 0.6s;
        }

        .menu-btn:hover::before {
            left: 100%;
        }

        .menu-btn:hover {
            transform: scale(1.05) translateY(-5px);
            box-shadow: 0 15px 40px rgba(255,0,128,0.6);
            border-color: #fff;
        }

        .professor-select {
            display: none;
            width: 100%;
            min-height: 100vh;
            position: relative;
            background: linear-gradient(135deg, rgba(26,0,51,0.9), rgba(51,0,102,0.8));
            padding: 2rem;
            overflow-y: auto;
        }

        .professor-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 2rem;
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem 0;
        }

        .professor-card {
            background: linear-gradient(135deg, rgba(0,0,0,0.8), rgba(30,30,30,0.9));
            border: 3px solid transparent;
            border-radius: 20px;
            padding: 2rem;
            cursor: pointer;
            transition: all 0.5s ease;
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(15px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        .professor-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.1), transparent);
            transform: translateX(-100%);
            transition: transform 0.6s;
        }

        .professor-card:hover::before {
            transform: translateX(100%);
        }

        .professor-card:hover {
            transform: scale(1.05) rotateY(5deg);
            box-shadow: 0 20px 50px rgba(0,0,0,0.7);
            z-index: 10;
        }

        .professor-card.unlocked {
            border-color: #00ff88;
            box-shadow: 0 0 30px rgba(0,255,136,0.4);
        }

        .professor-card.completed {
            border-color: #ffaa00;
            box-shadow: 0 0 40px rgba(255,170,0,0.5);
            background: linear-gradient(135deg, rgba(255,170,0,0.2), rgba(255,215,0,0.1));
        }

        .professor-card.locked {
            opacity: 0.5;
            cursor: not-allowed;
            border-color: #666;
        }

        .professor-avatar {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            margin: 0 auto 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            border: 3px solid;
            animation: professorFloat 3s ease-in-out infinite;
        }

        @keyframes professorFloat {
            0%, 100% { transform: translateY(0px) scale(1); }
            50% { transform: translateY(-10px) scale(1.05); }
        }

        .professor-name {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
            text-align: center;
        }

        .professor-subject {
            font-size: 1.1rem;
            margin-bottom: 1rem;
            text-align: center;
            font-weight: 600;
        }

        .professor-description {
            font-size: 0.9rem;
            text-align: center;
            line-height: 1.4;
            margin-bottom: 1rem;
            color: #ccc;
        }

        .professor-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .stat-item {
            text-align: center;
            background: rgba(255,255,255,0.1);
            padding: 0.5rem;
            border-radius: 8px;
            backdrop-filter: blur(5px);
        }

        .stat-value {
            font-size: 1.2rem;
            font-weight: bold;
            display: block;
        }

        .stat-label {
            font-size: 0.7rem;
            color: #aaa;
        }

        .battle-arena {
            display: none;
            width: 100%;
            min-height: 100vh;
            position: relative;
            background:
                radial-gradient(circle at 30% 30%, rgba(255,0,0,0.3) 0%, transparent 50%),
                radial-gradient(circle at 70% 70%, rgba(0,255,0,0.3) 0%, transparent 50%),
                linear-gradient(135deg, #0a0a0a, #1a0a0a, #0a1a0a);
            overflow: hidden;
            padding: 1rem;
        }

        .battle-layout {
            display: grid;
            grid-template-areas:
                "boss boss"
                "dialogue dialogue"
                "player challenge";
            grid-template-columns: 1fr 1fr;
            grid-template-rows: auto auto 1fr;
            gap: 1rem;
            height: 100vh;
            max-width: 1200px;
            margin: 0 auto;
        }

        .professor-boss {
            grid-area: boss;
            background: linear-gradient(135deg, rgba(0,0,0,0.9), rgba(50,0,50,0.8));
            border: 4px solid;
            border-radius: 20px;
            padding: 2rem;
            text-align: center;
            backdrop-filter: blur(15px);
            animation: bossEntrance 4s ease-in-out infinite;
        }

        @keyframes bossEntrance {
            0%, 100% {
                transform: translateY(0px) scale(1);
                box-shadow: 0 0 30px currentColor;
            }
            50% {
                transform: translateY(-10px) scale(1.02);
                box-shadow: 0 0 50px currentColor;
            }
        }

        .boss-avatar {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            margin: 0 auto 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 4rem;
            border: 4px solid;
            animation: bossAvatarSpin 8s linear infinite;
        }

        @keyframes bossAvatarSpin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .boss-name {
            font-size: 2rem;
            font-weight: 900;
            margin-bottom: 0.5rem;
            font-family: 'Cinzel', serif;
        }

        .boss-subject {
            font-size: 1.2rem;
            margin-bottom: 1rem;
            font-weight: 600;
        }

        .hp-container {
            margin-bottom: 1rem;
        }

        .hp-bar {
            width: 100%;
            height: 25px;
            background: rgba(0,0,0,0.8);
            border: 3px solid;
            border-radius: 15px;
            overflow: hidden;
            position: relative;
        }

        .hp-fill {
            height: 100%;
            background: linear-gradient(90deg, #ff0000, #ff6600, #ffff00, #00ff00);
            transition: width 1s ease;
            border-radius: 12px;
            position: relative;
        }

        .hp-fill::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            animation: hpShine 2s linear infinite;
        }

        @keyframes hpShine {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .hp-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-weight: bold;
            color: #fff;
            text-shadow: 2px 2px 4px #000;
            font-size: 1rem;
        }

        .player-area {
            grid-area: player;
            background: linear-gradient(135deg, rgba(0,0,100,0.8), rgba(0,50,100,0.9));
            border: 4px solid #00aaff;
            border-radius: 20px;
            padding: 2rem;
            text-align: center;
            backdrop-filter: blur(15px);
            box-shadow: 0 0 30px #00aaff;
            animation: playerPulse 3s ease-in-out infinite;
        }

        @keyframes playerPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }

        .player-avatar {
            width: 80px;
            height: 80px;
            background: linear-gradient(45deg, #00aaff, #0088ff);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            margin: 0 auto 1rem;
            border: 3px solid #00ffff;
            animation: playerGlow 2s ease-in-out infinite alternate;
        }

        @keyframes playerGlow {
            from { box-shadow: 0 0 15px #00aaff; }
            to { box-shadow: 0 0 30px #00aaff, 0 0 45px #00ffff; }
        }

        .dialogue-container {
            grid-area: dialogue;
            background: linear-gradient(135deg, rgba(0,0,0,0.95), rgba(20,0,20,0.95));
            border: 4px solid;
            border-radius: 20px;
            padding: 2rem;
            text-align: center;
            backdrop-filter: blur(20px);
            animation: dialogueEntrance 0.8s ease-out;
        }

        @keyframes dialogueEntrance {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .dialogue-text {
            font-size: 1.3rem;
            line-height: 1.6;
            margin-bottom: 2rem;
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
        }

        .typing-effect::after {
            content: '|';
            animation: cursorBlink 1s infinite;
            color: currentColor;
        }

        @keyframes cursorBlink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0; }
        }

        .challenge-arena {
            grid-area: challenge;
            background: linear-gradient(135deg, rgba(0,0,0,0.9), rgba(30,0,30,0.9));
            border: 4px solid #ffaa00;
            border-radius: 20px;
            padding: 2rem;
            backdrop-filter: blur(15px);
            box-shadow: 0 0 40px rgba(255,170,0,0.4);
            display: none;
        }

        .challenge-title {
            font-size: 1.8rem;
            color: #ffaa00;
            text-align: center;
            margin-bottom: 1rem;
            font-family: 'Cinzel', serif;
            font-weight: 900;
        }

        .challenge-timer-container {
            margin-bottom: 1.5rem;
        }

        .challenge-timer {
            width: 100%;
            height: 20px;
            background: rgba(0,0,0,0.8);
            border: 2px solid #ff0000;
            border-radius: 10px;
            overflow: hidden;
            position: relative;
        }

        .timer-fill {
            height: 100%;
            background: linear-gradient(90deg, #00ff00, #ffff00, #ff6600, #ff0000);
            transition: width 0.1s linear;
            border-radius: 8px;
        }

        .timer-text {
            text-align: center;
            font-size: 1.1rem;
            color: #ff6666;
            margin-top: 0.5rem;
            font-weight: bold;
        }

        .math-challenge {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .equation-display {
            font-size: 2.5rem;
            text-align: center;
            color: #00ffff;
            background: linear-gradient(135deg, rgba(0,255,255,0.1), rgba(0,200,255,0.2));
            padding: 2rem;
            border-radius: 15px;
            border: 2px solid #00ffff;
            font-family: 'Orbitron', monospace;
            font-weight: bold;
        }

        .answer-section {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .answer-display {
            font-size: 2rem;
            text-align: center;
            background: linear-gradient(135deg, #000, #111);
            color: #00ff00;
            padding: 1rem;
            border: 2px solid #00ff00;
            border-radius: 10px;
            font-family: 'Orbitron', monospace;
            font-weight: bold;
        }

        .number-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 0.5rem;
        }

        .number-btn {
            padding: 1rem;
            font-size: 1.2rem;
            font-weight: bold;
            background: linear-gradient(45deg, #333, #555);
            border: 2px solid #777;
            border-radius: 10px;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: inherit;
        }

        .number-btn:hover {
            background: linear-gradient(45deg, #555, #777);
            transform: scale(1.05);
            border-color: #fff;
        }

        .multiple-choice {
            text-align: center;
        }

        .question-text {
            font-size: 1.5rem;
            margin-bottom: 2rem;
            color: #ffff00;
            line-height: 1.4;
            font-weight: 600;
        }

        .options-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
        }

        .option-btn {
            padding: 1.5rem;
            font-size: 1.1rem;
            background: linear-gradient(45deg, #660066, #990099);
            border: 3px solid #ff00ff;
            border-radius: 15px;
            color: white;
            cursor: pointer;
            transition: all 0.4s ease;
            font-family: inherit;
            font-weight: bold;
            position: relative;
            overflow: hidden;
        }

        .option-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: left 0.5s;
        }

        .option-btn:hover::before {
            left: 100%;
        }

        .option-btn:hover {
            background: linear-gradient(45deg, #990099, #cc00cc);
            transform: scale(1.05);
        }

        .option-btn.correct {
            background: linear-gradient(45deg, #006600, #00aa00);
            border-color: #00ff00;
            animation: correctAnswer 1s ease;
        }

        .option-btn.incorrect {
            background: linear-gradient(45deg, #660000, #aa0000);
            border-color: #ff0000;
            animation: incorrectAnswer 0.8s ease;
        }

        @keyframes correctAnswer {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        @keyframes incorrectAnswer {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        .damage-effect {
            position: fixed;
            font-size: 3rem;
            font-weight: 900;
            pointer-events: none;
            animation: damageAnimation 2s ease-out forwards;
            z-index: 1000;
            font-family: 'Cinzel', serif;
        }

        .damage-player {
            color: #ff0000;
            text-shadow: 0 0 20px #ff0000;
        }

        .damage-boss {
            color: #00ff00;
            text-shadow: 0 0 20px #00ff00;
        }

        .damage-critical {
            color: #ffff00;
            text-shadow: 0 0 30px #ffff00;
            font-size: 4rem !important;
        }

        @keyframes damageAnimation {
            0% {
                transform: translateY(0) scale(1);
                opacity: 1;
            }
            100% {
                transform: translateY(-100px) scale(1.5);
                opacity: 0;
            }
        }

        .game-ui {
            position: fixed;
            top: 1rem;
            left: 1rem;
            background: linear-gradient(135deg, rgba(0,0,0,0.9), rgba(30,0,30,0.9));
            padding: 1rem;
            border: 2px solid #ffaa00;
            border-radius: 15px;
            z-index: 1000;
            backdrop-filter: blur(10px);
            box-shadow: 0 0 20px rgba(255,170,0,0.3);
        }

        .ui-stat {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
            color: #ffaa00;
            font-weight: bold;
            min-width: 200px;
        }

        .ui-stat-value {
            color: #fff;
        }

        .combo-counter {
            position: fixed;
            top: 1rem;
            right: 1rem;
            background: linear-gradient(45deg, #ff0080, #8000ff);
            padding: 1rem 1.5rem;
            border-radius: 15px;
            font-size: 1.2rem;
            font-weight: bold;
            color: #fff;
            box-shadow: 0 0 20px rgba(255,0,128,0.4);
            z-index: 1000;
            animation: comboPulse 1s ease-in-out infinite;
        }

        @keyframes comboPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .back-btn {
            position: fixed;
            bottom: 1rem;
            left: 1rem;
            padding: 0.8rem 1.5rem;
            background: linear-gradient(45deg, #ff0000, #cc0000);
            border: 2px solid #ff0000;
            border-radius: 10px;
            color: white;
            cursor: pointer;
            font-family: inherit;
            font-weight: bold;
            font-size: 1rem;
            transition: all 0.3s ease;
            z-index: 1000;
        }

        .back-btn:hover {
            background: linear-gradient(45deg, #cc0000, #990000);
            transform: scale(1.05);
        }

        .result-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(0,0,0,0.95), rgba(20,0,20,0.95));
            display: none;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            z-index: 2000;
            backdrop-filter: blur(20px);
        }

        .result-content {
            text-align: center;
            background: linear-gradient(135deg, rgba(0,0,0,0.9), rgba(30,0,30,0.9));
            padding: 3rem;
            border-radius: 30px;
            border: 4px solid;
            backdrop-filter: blur(15px);
            max-width: 600px;
            width: 90%;
        }

        .result-title {
            font-family: 'Cinzel', serif;
            font-size: 3rem;
            font-weight: 900;
            margin-bottom: 2rem;
            animation: resultGlow 2s ease-in-out infinite alternate;
        }

        .victory-title {
            color: #00ff00;
            border-color: #00ff00;
        }

        .defeat-title {
            color: #ff0000;
            border-color: #ff0000;
        }

        @keyframes resultGlow {
            from { text-shadow: 0 0 20px currentColor; }
            to { text-shadow: 0 0 40px currentColor; }
        }

        .result-message {
            font-size: 1.3rem;
            margin-bottom: 2rem;
            line-height: 1.5;
            color: #ccc;
        }

        .result-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .result-stat {
            background: rgba(255,255,255,0.1);
            padding: 1rem;
            border-radius: 10px;
            backdrop-filter: blur(5px);
        }

        .result-stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: #ffaa00;
            display: block;
            margin-bottom: 0.5rem;
        }

        .result-stat-label {
            font-size: 0.9rem;
            color: #aaa;
        }

        @media (max-width: 768px) {
            .battle-layout {
                grid-template-areas:
                    "boss"
                    "dialogue"
                    "player"
                    "challenge";
                grid-template-columns: 1fr;
                grid-template-rows: auto auto auto 1fr;
            }
            
            .professor-grid {
                grid-template-columns: 1fr;
                padding: 1rem;
            }
            
            .game-title::before,
            .game-title::after {
                display: none;
            }
            
            .options-grid {
                grid-template-columns: 1fr;
            }
            
            .number-grid {
                grid-template-columns: repeat(3, 1fr);
            }
            
            .result-stats {
                grid-template-columns: 1fr;
            }
        }

        .hidden { display: none !important; }
        .show { display: block !important; }
        .show-flex { display: flex !important; }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="particle-system" id="particleSystem"></div>
        
        <div id="mainMenu" class="main-menu">
            <h1 class="game-title">ACADEMIA DOS MESTRES SUPREMOS</h1>
            <p class="subtitle">EDI√á√ÉO DEFINITIVA - CONFRONTO √âPICO</p>
            <div class="menu-buttons">
                <button class="menu-btn" onclick="showProfessorSelect()">‚öîÔ∏è ENTRAR NA ARENA SUPREMA</button>
                <button class="menu-btn" onclick="showInstructions()">üìú MANUAL DO GUERREIRO</button>
                <button class="menu-btn" onclick="showHallOfFame()">üèÜ HALL DA FAMA √âPICO</button>
                <button class="menu-btn" onclick="resetAllProgress()">üíÄ RESETAR UNIVERSO</button>
            </div>
        </div>

        <div id="professorSelect" class="professor-select">
            <button class="back-btn" onclick="showMainMenu()">‚Üê FUGIR DA ACADEMIA</button>
            
            <div class="game-ui">
                <div class="ui-stat">
                    <span>üéì N√≠vel:</span>
                    <span class="ui-stat-value" id="playerLevel">1</span>
                </div>
                <div class="ui-stat">
                    <span>‚ö° Poder:</span>
                    <span class="ui-stat-value" id="playerPower">100</span>
                </div>
                <div class="ui-stat">
                    <span>üèÜ Vit√≥rias:</span>
                    <span class="ui-stat-value" id="victories">0/15</span>
                </div>
                <div class="ui-stat">
                    <span>üíÄ Derrotas:</span>
                    <span class="ui-stat-value" id="defeats">0</span>
                </div>
                <div class="ui-stat">
                    <span>üî• Combo Max:</span>
                    <span class="ui-stat-value" id="maxCombo">0</span>
                </div>
            </div>

            <div style="text-align: center; margin: 2rem 0;">
                <h2 style="font-size: 3rem; color: #ff0080; margin-bottom: 1rem; font-family: 'Cinzel', serif;">
                    ESCOLHA SEU DESTINO
                </h2>
                <p style="font-size: 1.2rem; color: #ccc; margin-bottom: 2rem;">
                    Cada professor √© um mestre supremo em sua arte. Prepare-se para o confronto definitivo!
                </p>
            </div>

            <div class="professor-grid" id="professorGrid">
            </div>
        </div>

        <div id="battleArena" class="battle-arena">
            <button class="back-btn" onclick="fleeBattle()">üí® FUGIR</button>
            <div class="combo-counter" id="comboCounter" style="display: none;">
                COMBO: <span id="comboValue">0</span>x
            </div>

            <div class="battle-layout">
                <div class="professor-boss" id="professorBoss">
                    <div class="boss-avatar" id="bossAvatar">üë®‚Äçüè´</div>
                    <div class="boss-name" id="bossName">MESTRE SUPREMO</div>
                    <div class="boss-subject" id="bossSubject">CONHECIMENTO ABSOLUTO</div>
                    <div class="hp-container">
                        <div class="hp-bar">
                            <div class="hp-fill" id="bossHPFill" style="width: 100%;"></div>
                            <div class="hp-text" id="bossHPText">1000/1000</div>
                        </div>
                    </div>
                </div>

                <div class="dialogue-container" id="dialogueContainer">
                    <div class="dialogue-text" id="dialogueText">
                        Prepare-se para enfrentar o conhecimento supremo...
                    </div>
                    <button class="menu-btn" onclick="startChallenge()" id="startChallengeBtn">‚öîÔ∏è ACEITAR O DESTINO</button>
                </div>

                <div class="player-area">
                    <div class="player-avatar">üéì</div>
                    <div style="font-size: 1.3rem; font-weight: bold; margin-bottom: 1rem; color: #00ffff;">ESTUDANTE SUPREMO</div>
                    <div class="hp-container">
                        <div class="hp-bar">
                            <div class="hp-fill" id="playerHPFill" style="width: 100%;"></div>
                            <div class="hp-text" id="playerHPText">500/500</div>
                        </div>
                    </div>
                    <div style="color: #ffff00; font-weight: bold; margin-top: 1rem;" id="playerLevelDisplay">N√çVEL 1</div>
                </div>

                <div class="challenge-arena" id="challengeArena">
                    <div class="challenge-title" id="challengeTitle">DESAFIO SUPREMO</div>
                    <div class="challenge-timer-container">
                        <div class="challenge-timer">
                            <div class="timer-fill" id="timerFill" style="width: 100%;"></div>
                        </div>
                        <div class="timer-text" id="timerText">Tempo: 30s</div>
                    </div>
                    <div id="challengeContent">
                    </div>
                </div>
            </div>
        </div>

        <div class="result-screen" id="resultScreen">
            <div class="result-content" id="resultContent">
                <div class="result-title" id="resultTitle">VIT√ìRIA √âPICA!</div>
                <div class="result-message" id="resultMessage">
                    Voc√™ provou ser digno do conhecimento supremo!
                </div>
                <div class="result-stats">
                    <div class="result-stat">
                        <span class="result-stat-value" id="finalScore">0</span>
                        <span class="result-stat-label">Pontua√ß√£o Final</span>
                    </div>
                    <div class="result-stat">
                        <span class="result-stat-value" id="finalCombo">0</span>
                        <span class="result-stat-label">Combo M√°ximo</span>
                    </div>
                    <div class="result-stat">
                        <span class="result-stat-value" id="finalTime">0</span>
                        <span class="result-stat-label">Tempo Restante</span>
                    </div>
                </div>
                <button class="menu-btn" onclick="continueJourney()">CONTINUAR JORNADA</button>
            </div>
        </div>
    </div>

    <script>
        let gameState = {
            playerLevel: 1,
            playerPower: 100,
            playerHP: 500,
            playerMaxHP: 500,
            victories: [],
            defeats: 0,
            maxCombo: 0,
            currentBoss: null,
            bossHP: 1000,
            bossMaxHP: 1000,
            challengeTimer: null,
            timeLeft: 30,
            currentChallenge: null,
            isInBattle: false,
            currentCombo: 0,
            totalScore: 0,
            battleStats: {
                questionsAnswered: 0,
                correctAnswers: 0,
                criticalHits: 0,
                timeBonus: 0
            }
        };

        const professors = [
            {
                id: 1, name: "Mazim", subject: "Portugu√™s", emoji: "üìö",
                color: "#8B5CF6", hp: 1200, difficulty: 3, powerLevel: 8500,
                description: "Mestre das palavras e guardi√£o da literatura brasileira",
                phrases: [
                    "As palavras s√£o l√¢minas afiadas que cortam a ignor√¢ncia!",
                    "Sua ortografia √© uma ofensa aos grandes escritores!",
                    "Cada v√≠rgula mal colocada ser√° punida com dor intelectual!",
                    "Vou te fazer conjugar verbos at√© sua alma implorar por miseric√≥rdia!"
                ],
                challenges: [
                    {
                        type: "grammar",
                        question: "Em qual alternativa h√° um exemplo claro de ambiguidade estrutural?",
                        options: ["A menina pintou o quadro com tinta vermelha", "O cachorro mordeu o carteiro na perna", "Maria viu a mo√ßa com bin√≥culos", "O professor corrigiu as provas rapidamente"],
                        correct: 2,
                        timeLimit: 15,
                        difficulty: "hard"
                    },
                    {
                        type: "literature",
                        question: "Assinale a alternativa em que h√° um erro de reg√™ncia verbal:",
                        options: ["Esqueci-me do compromisso", "Aspirava √† vaga de diretor", "Assisti o filme ontem", "Cheguei ao local com anteced√™ncia"],
                        correct: 2,
                        timeLimit: 20,
                        difficulty: "extreme"
                    },
                    {
                        type: "syntax",
                        question: "Qual das alternativas exemplifica uma ora√ß√£o subordinada adjetiva explicativa?",
                        options: ["Os livros que comprei s√£o caros", "O aluno que estuda passa", "A Terra, que √© azul, gira constantemente", "A mulher que grita est√° nervosa"],
                        correct: 2,
                        timeLimit: 25,
                        difficulty: "extreme"
                    },
                    {
                        type: "grammar",
                        question: " Em 'Jo√£o, embora esfor√ßado, n√£o conseguiu a vaga', a ora√ß√£o destacada √©:",
                        options: ["Subordinada adjetiva", "Coordenada sind√©tica adversativa", "Subordinada adverbial concessiva", "Coordenada assind√©tica"],
                        correct: 2,
                        timeLimit: 18,
                        difficulty: "hard"
                    },
                    {
                        type: "literature",
                        question: "Qual frase possui um exemplo de meton√≠mia?",
                        options: ["A vida √© um mar de rosas", "Ele leu Machado de Assis com paix√£o", "Chorava rios de l√°grimas", "Ela √© uma flor"],
                        correct: 1,
                        timeLimit: 22,
                        difficulty: "extreme"
                    }
                ]
            },
            {
                id: 2, name: "Fernando", subject: "Matem√°tica I", emoji: "üî¢",
                color: "#3B82F6", hp: 1400, difficulty: 4, powerLevel: 9200,
                description: "Senhor dos n√∫meros e mestre das equa√ß√µes fundamentais",
                phrases: [
                    "Os n√∫meros n√£o mentem, e eles dizem que voc√™ vai perder!",
                    "Vou calcular exatamente quanto voc√™ vai sofrer: INFINITO!",
                    "Sua ignor√¢ncia matem√°tica √© uma constante... ZERO!",
                    "Prepare-se para uma li√ß√£o de √°lgebra que doer√° at√© na alma!"
                ],
                challenges: [
                    {
                        type: "calculation",
                        question: "Uma mercadoria sofreu um aumento de 25% e passou a custar R$ 750,00. Qual era o pre√ßo anterior ao aumento?",
                        answer: 625,
                        timeLimit: 20,
                        difficulty: "hard"
                    },
                    {
                        type: "algebra",
                        question: " Um carro percorre 450 km com 30 litros de gasolina. Quantos litros seriam necess√°rios para percorrer 600 km?",
                        options: ["35", "38", "40", "45"],
                        correct: 2,
                        timeLimit: 25,
                        difficulty: "extreme"
                    },
                    {
                        type: "geometry",
                        question: "Em uma f√°brica, 12 oper√°rios produzem 180 pe√ßas por dia. Quantas pe√ßas seriam produzidas por 20 oper√°rios no mesmo ritmo?",
                        options: ["240", "270", "300", "360"],
                        correct: 3,
                        timeLimit: 30,
                        difficulty: "extreme"
                    },
                    {
                        type: "calculation",
                        question: "Um capital de R$ 2.000,00 foi aplicado a uma taxa de juros simples de 1,5% ao m√™s durante 10 meses. Qual o montante final?",
                        options: ["R$ 2.200,00", "R$ 2.300,00", "R$ 2.400,00", "R$ 2.500,00"],
                        correct: 2,
                        timeLimit: 12,
                        difficulty: "medium"
                    },
                    {
                        type: "algebra",
                        question: "Em uma sala com 40 alunos, 15 s√£o meninas. Qual a raz√£o entre meninos e meninas?",
                        options: ["5:3", "3:5", "2:1", "1:2"],
                        correct: 0,
                        timeLimit: 20,
                        difficulty: "hard"
                    }
                ]
            },
            {
                id: 3, name: "Peixoto", subject: "Matem√°tica II", emoji: "üìê",
                color: "#1E40AF", hp: 1600, difficulty: 5, powerLevel: 9800,
                description: "Guardi√£o supremo da matem√°tica avan√ßada e senhor do c√°lculo",
                phrases: [
                    "Matem√°tica avan√ßada √© meu reino! Voc√™ √© apenas um zero √† esquerda!",
                    "Vou te integrar... na derrota absoluta!",
                    "Suas derivadas de conhecimento tendem a MENOS INFINITO!",
                    "Prepare-se para limites infinitos de sofrimento matem√°tico!"
                ],
                challenges: [
                    {
                        type: "calculus",
                        question: "Derivada de x¬≥ + 2x¬≤ - 5x + 3",
                        options: ["3x¬≤ + 4x - 5", "x¬≤ + 4x - 5", "3x¬≤ + 2x - 5", "3x¬≤ + 4x + 5"],
                        correct: 0,
                        timeLimit: 35,
                        difficulty: "extreme"
                    },
                    {
                        type: "trigonometry",
                        question: "sen¬≤(x) + cos¬≤(x) = ?",
                        options: ["0", "1", "2", "œÄ"],
                        correct: 1,
                        timeLimit: 20,
                        difficulty: "hard"
                    },
                    {
                        type: "integration",
                        question: "‚à´(2x + 3)dx = ?",
                        options: ["x¬≤ + 3x + C", "2x¬≤ + 3x + C", "x¬≤ + 3x", "2x + 3"],
                        correct: 0,
                        timeLimit: 40,
                        difficulty: "extreme"
                    },
                    {
                        type: "limits",
                        question: "lim(x‚Üí0) (sen x)/x = ?",
                        options: ["0", "1", "‚àû", "N√£o existe"],
                        correct: 1,
                        timeLimit: 30,
                        difficulty: "extreme"
                    }
                ]
            },
            {
                id: 4, name: "Irineu", subject: "Biologia", emoji: "üß¨",
                color: "#10B981", hp: 1300, difficulty: 4, powerLevel: 8800,
                description: "Mestre da vida e guardi√£o dos segredos celulares",
                phrases: [
                    "A evolu√ß√£o selecionou voc√™ para a extin√ß√£o!",
                    "Vou dissecar seu conhecimento c√©lula por c√©lula!",
                    "Sua ignor√¢ncia biol√≥gica √© uma muta√ß√£o letal!",
                    "Prepare-se para uma li√ß√£o de anatomia... da DOR!"
                ],
                challenges: [
                    {
                        type: "cell_biology",
                        question: "A organela da respira√ß√£o celular √©:",
                        options: ["Cloroplasto", "Ribossomo", "Mitoc√¥ndria", "Lisossomo"],
                        correct: 2,
                        timeLimit: 20,
                        difficulty: "hard"
                    },
                    {
                        type: "genetics",
                        question: " Doen√ßas causadas por v√≠rus:",
                        options: ["AIDS, s√≠filis e gripe", "Gripe, dengue e sarampo", "Caxumba, tuberculose e febre amarela", "Leptospirose, raiva e herpes"],
                        correct: 1,
                        timeLimit: 25,
                        difficulty: "extreme"
                    },
                    {
                        type: "evolution",
                        question: "A s√≠ntese de prote√≠nas ocorre no:",
                        options: ["N√∫cleo", "Ret√≠culo endoplasm√°tico liso", "Ribossomo", "Mitoc√¥ndria"],
                        correct: 2,
                        timeLimit: 30,
                        difficulty: "extreme"
                    }
                ]
            },
            {
                id: 5, name: "Victor", subject: "Hist√≥ria", emoji: "üèõÔ∏è",
                color: "#F59E0B", hp: 1500, difficulty: 4, powerLevel: 9100,
                description: "Senhor do tempo e guardi√£o dos segredos do passado",
                phrases: [
                    "A hist√≥ria se repete... e hoje voc√™ ser√° HIST√ìRIA ANTIGA!",
                    "Vou te mandar para a idade das trevas... PERMANENTEMENTE!",
                    "Seu conhecimento hist√≥rico √© mais antigo que os dinossauros!",
                    "Prepare-se para uma revolu√ß√£o... da sua DERROTA!"
                ],
                challenges: [
                    {
                        type: "world_history",
                        question: "A Revolu√ß√£o Francesa ocorreu no contexto do:",
                        options: ["Feudalismo", "Iluminismo e crise do Absolutismo", "Guerra Fria", "Imperialismo europeu"],
                        correct: 1,
                        timeLimit: 18,
                        difficulty: "hard"
                    },
                    {
                        type: "brazilian_history",
                        question: "Quem foi o primeiro presidente do Brasil?",
                        options: ["Get√∫lio Vargas", "Deodoro da Fonseca", "Floriano Peixoto", "Prudente de Morais"],
                        correct: 1,
                        timeLimit: 25,
                        difficulty: "extreme"
                    },
                    {
                        type: "ancient_history",
                        question: "A crise de 1929 teve como causa principal:",
                        options: ["Fracasso do socialismo", "Queda da bolsa de Nova York", "1¬™ Guerra Mundial", "Crash do petr√≥leo"],
                        correct: 1,
                        timeLimit: 30,
                        difficulty: "extreme"
                    }
                ]
            },
            {
                id: 6, name: "Andr√©", subject: "Sociologia", emoji: "üë•",
                color: "#EF4444", hp: 1200, difficulty: 3, powerLevel: 8300,
                description: "Mestre da sociedade e analista supremo do comportamento humano",
                phrases: [
                    "A sociedade te moldou para o FRACASSO ABSOLUTO!",
                    "Vou te mostrar a verdadeira luta de classes... voc√™ contra MIM!",
                    "Sua aliena√ß√£o social ser√° sua ru√≠na definitiva!",
                    "Prepare-se para uma revolu√ß√£o cultural... DOLOROSA!"
                ],
                challenges: [
                    {
                        type: "sociology",
                        question: "A no√ß√£o de 'aliena√ß√£o' segundo Marx refere-se principalmente a:",
                        options: ["A perda de controle do trabalhador sobre o produto de seu trabalho", "A opress√£o da classe dominante pelo Estado", "A luta entre patr√µes e empregados", "A solidariedade social espont√¢nea"],
                        correct: 0,
                        timeLimit: 25,
                        difficulty: "extreme"
                    },
                    {
                        type: "social_theory",
                        question: "Durkheim considerava que a ‚Äúcoes√£o social‚Äù nas sociedades modernas se baseia predominantemente em:",
                        options: ["Consenso moral r√≠gido e uniforme", "Solidariedade mec√¢nica", "Solidariedade org√¢nica", "Domina√ß√£o pol√≠tica"],
                        correct: 2,
                        timeLimit: 30,
                        difficulty: "extreme"
                    },
                    {
                        type: "social_theory",
                        question: "Para Max Weber, a a√ß√£o social √© definida como aquela que:",
                        options: ["√â movida exclusivamente por interesses econ√¥micos", "Leva em conta o comportamento dos outros e seu significado", "Sempre resulta em conflito de classes", "√â determinada apenas pela estrutura social"],
                        correct: 1,
                        timeLimit: 30,
                        difficulty: "extreme"
                    }
                ]
            },
            {
                id: 7, name: "Andreane", subject: "Qu√≠mica", emoji: "‚öóÔ∏è",
                color: "#06B6D4", hp: 1450, difficulty: 5, powerLevel: 9500,
                description: "Alquimista suprema e senhora das rea√ß√µes moleculares",
                phrases: [
                    "Vamos fazer uma rea√ß√£o... EXPLOSIVA E LETAL!",
                    "Sua ignor√¢ncia qu√≠mica ser√° catalisada pela DOR PURA!",
                    "Vou balancear esta equa√ß√£o... com sua DESTRUI√á√ÉO!",
                    "Prepare-se para uma liga√ß√£o i√¥nica... com o SOFRIMENTO!"
                ],
                challenges: [
                    {
                        type: "chemistry",
                        question: "Durante um experimento, foi observado que uma subst√¢ncia ao ser dissolvida em √°gua liberava √≠ons H‚Å∫, provocando uma mudan√ßa na cor de um indicador √°cido-base. Essa subst√¢ncia √© classificada como:",
                        options: ["Base", "√Åcido", "Sal", "√ìxido neutro"],
                        correct: 1,
                        timeLimit: 15,
                        difficulty: "medium"
                    },
                    {
                        type: "chemical_bonds",
                        question: "Em uma rea√ß√£o de neutraliza√ß√£o, um √°cido reage com uma base formando dois produtos principais. Esses produtos s√£o:",
                        options: ["√Åcido e base", "Sal e √°gua", "Sal e g√°s", "Base e g√°s"],
                        correct: 1,
                        timeLimit: 25,
                        difficulty: "extreme"
                    },
                    {
                        type: "organic_chemistry",
                        question: "Durante uma an√°lise de laborat√≥rio, um composto apresentou liga√ß√£o entre dois n√£o metais e era vol√°til. Com base nessa informa√ß√£o, trata-se provavelmente de um composto:",
                        options: ["I√¥nico", "Met√°lico", "Covalente", "Radical livre"],
                        correct: 2,
                        timeLimit: 20,
                        difficulty: "hard"
                    }
                    
                ]
            },
            {
                id: 8, name: "Pedro Ricardo", subject: "Geografia", emoji: "üåç",
                color: "#84CC16", hp: 1350, difficulty: 4, powerLevel: 8700,
                description: "Navegador supremo e mestre dos continentes e oceanos",
                phrases: [
                    "Conhe√ßo todos os cantos do mundo... incluindo onde voc√™ ser√° ENTERRADO!",
                    "Vou te mandar para as coordenadas da DERROTA ABSOLUTA!",
                    "Sua orienta√ß√£o geogr√°fica √© um desastre natural PERMANENTE!",
                    "Prepare-se para um tsunami de conhecimento DEVASTADOR!"
                ],
                challenges: [
                    {
                        type: "geography",
                        question: "Aqu√≠fero Guarani localiza-se na:",
                        options: ["Am√©rica do Norte", "Am√©rica do Sul", "Europa", "√Åfrica"],
                        correct: 1,
                        timeLimit: 18,
                        difficulty: "hard"
                    },
                    {
                        type: "capitals",
                        question: "Qual √© a capital da Austr√°lia?",
                        options: ["Sydney", "Melbourne", "Canberra", "Perth"],
                        correct: 2,
                        timeLimit: 25,
                        difficulty: "extreme"
                    },
                    {
                        type: "physical_geography",
                        question: "Principal g√°s do efeito estufa:",
                        options: ["Oz√¥nio", "Oxig√™nio", "Di√≥xido de carbono", "Nitrog√™nio"],
                        correct: 2,
                        timeLimit: 30,
                        difficulty: "extreme"
                    }
                ]
            },
            {
                id: 9, name: "Carlos", subject: "F√≠sica", emoji: "‚ö°",
                color: "#F97316", hp: 1700, difficulty: 5, powerLevel: 10500,
                description: "Senhor das leis universais e mestre da energia c√≥smica",
                phrases: [
                    "As leis da f√≠sica s√£o ABSOLUTAS... assim como sua DERROTA!",
                    "Vou te mostrar a verdadeira for√ßa da gravidade... te ESMAGANDO!",
                    "Sua energia cin√©tica tende a ZERO ABSOLUTO!",
                    "Prepare-se para uma acelera√ß√£o... da DOR INFINITA!"
                ],
                challenges: [
                    {
                        type: "physics",
                        question: "Um corpo est√° em movimento retil√≠neo uniforme. Isso significa que:",
                        options: ["Sua velocidade varia com o tempo", "Ele est√° acelerando constantemente", "Sua velocidade √© constante", "Ele est√° em repouso absoluto"],
                        correct: 2,
                        timeLimit: 20,
                        difficulty: "hard"
                    },
                    {
                        type: "mechanics",
                        question: "Ao aumentar a for√ßa aplicada sobre um objeto com massa constante, o que acontece com a acelera√ß√£o desse objeto?",
                        options: ["Permanece a mesma", "Diminui", "Aumenta", "Se torna negativa"],
                        correct: 2,
                        timeLimit: 25,
                        difficulty: "extreme"
                    },
                    {
                        type: "quantum_physics",
                        question: "Qual √© a velocidade da luz no v√°cuo?",
                        options: ["300.000 km/s", "299.792.458 m/s", "3√ó10‚Å∏ m/s", "Todas as anteriores"],
                        correct: 3,
                        timeLimit: 35,
                        difficulty: "extreme"
                    }
                ]
            },
            {
                id: 10, name: "Gildeon", subject: "Filosofia I", emoji: "ü§î",
                color: "#7C3AED", hp: 1250, difficulty: 4, powerLevel: 8600,
                description: "Pensador supremo e guardi√£o da sabedoria ancestral",
                phrases: [
                    "Penso, logo existo... voc√™ pensa, logo SOFRE ETERNAMENTE!",
                    "Vou questionar sua exist√™ncia at√© voc√™ DESAPARECER!",
                    "Sua ignor√¢ncia filos√≥fica √© um paradoxo INSOLUVEL!",
                    "Prepare-se para um dilema existencial... DOLOROSO E ETERNO!"
                ],
                challenges: [
                    {
                        type: "philosophy",
                        question: "Quem disse 'S√≥ sei que nada sei'?",
                        options: ["Plat√£o", "Arist√≥teles", "S√≥crates", "Tales"],
                        correct: 2,
                        timeLimit: 25,
                        difficulty: "extreme"
                    },
                    {
                        type: "ancient_philosophy",
                        question: "O que significa filosofia?",
                        options: ["Amor √† sabedoria", "Amor √† beleza", "Amor √† verdade", "Amor ao conhecimento"],
                        correct: 0,
                        timeLimit: 20,
                        difficulty: "hard"
                    }
                ]
            },
            {
                id: 11, name: "Denisfran", subject: "Filosofia II", emoji: "üí≠",
                color: "#5B21B6", hp: 1400, difficulty: 5, powerLevel: 9300,
                description: "Mestre do pensamento complexo e senhor da dial√©tica suprema",
                phrases: [
                    "A filosofia √© profunda... assim como ser√° sua QUEDA INTELECTUAL!",
                    "Vou te mostrar o verdadeiro niilismo... sua ANIQUILA√á√ÉO!",
                    "Sua dial√©tica √© pat√©tica... minha √© LETAL!",
                    "Prepare-se para o imperativo categ√≥rico... da sua DESTRUI√á√ÉO!"
                ],
                challenges: [
                    {
                        type: "modern_philosophy",
                        question: "Quem escreveu 'Penso, logo existo'?",
                        options: ["Kant", "Descartes", "Hume", "Locke"],
                        correct: 1,
                        timeLimit: 25,
                        difficulty: "extreme"
                    },
                    {
                        type: "existentialism",
                        question: "O que caracteriza o existencialismo?",
                        options: ["Ess√™ncia precede exist√™ncia", "Exist√™ncia precede ess√™ncia", "N√£o h√° diferen√ßa", "Ambas s√£o ilus√µes"],
                        correct: 1,
                        timeLimit: 35,
                        difficulty: "extreme"
                    }
                ]
            },
            {
                id: 12, name: "L√©o", subject: "Educa√ß√£o F√≠sica I", emoji: "üí™",
                color: "#DC2626", hp: 1800, difficulty: 4, powerLevel: 10200,
                description: "Gladiador supremo e mestre do condicionamento f√≠sico extremo",
                phrases: [
                    "Corpo s√£o, mente s√£... mas voc√™ n√£o ter√° NEM UM NEM OUTRO!",
                    "Vou te dar um treino que voc√™ nunca esquecer√°... se SOBREVIVER!",
                    "Sua forma f√≠sica √© uma piada... e eu sou a PUNCHLINE!",
                    "Prepare-se para suar... SANGUE E L√ÅGRIMAS!"
                ],
                challenges: [
                    {
                        type: "sports",
                        question: "O sedentarismo est√° ligado a:",
                        options: ["Alta performance f√≠sica", "Alimenta√ß√£o equilibrada", "Baixo gasto cal√≥rico", "Pr√°tica regular de esportes"],
                        correct: 2,
                        timeLimit: 15,
                        difficulty: "medium"
                    },
                    {
                        type: "anatomy",
                        question: "Quantos ossos tem o corpo humano adulto?",
                        options: ["206", "208", "210", "212"],
                        correct: 0,
                        timeLimit: 25,
                        difficulty: "extreme"
                    },
                    {
                        type: "physiology",
                        question: "Qual √© a frequ√™ncia card√≠aca m√°xima te√≥rica?",
                        options: ["200 - idade", "220 - idade", "180 - idade", "250 - idade"],
                        correct: 1,
                        timeLimit: 30,
                        difficulty: "extreme"
                    }
                ]
            },
            {
                id: 13, name: "Aurine", subject: "Educa√ß√£o F√≠sica II", emoji: "üèÉ‚Äç‚ôÄÔ∏è",
                color: "#BE185D", hp: 1600, difficulty: 4, powerLevel: 9700,
                description: "Amazona suprema e mestra da performance atl√©tica m√°xima",
                phrases: [
                    "Vamos exercitar... sua capacidade de SOFRER INFINITAMENTE!",
                    "Flexibilidade √© tudo... menos o que voc√™ tem na MENTE!",
                    "Vou te dar uma aula de resist√™ncia... √† DOR ABSOLUTA!",
                    "Prepare-se para o treino mais intenso... da sua VIDA MISER√ÅVEL!"
                ],
                challenges: [
                    {
                        type: "fitness",
                        question: "O que desenvolve principalmente a flexibilidade?",
                        options: ["Muscula√ß√£o", "Alongamento", "Corrida", "Nata√ß√£o"],
                        correct: 1,
                        timeLimit: 20,
                        difficulty: "hard"
                    },
                    {
                        type: "health",
                        question: "O papel da atividade f√≠sica na promo√ß√£o da sa√∫de mental est√° relacionado a:",
                        options: ["Redu√ß√£o do gasto energ√©tico", "Aumento da competitividade social", "Libera√ß√£o de horm√¥nios como a endorfina", "Isolamento volunt√°rio do praticante"],
                        correct: 2,
                        timeLimit: 25,
                        difficulty: "extreme"
                    },
                    {
                        type: "nutrition",
                        question: "Qual macronutriente fornece mais energia por grama?",
                        options: ["Carboidrato", "Prote√≠na", "Gordura", "Fibra"],
                        correct: 2,
                        timeLimit: 30,
                        difficulty: "extreme"
                    }
                ]
            },
            {
                id: 14, name: "Vilarinho", subject: "M√∫sica/Artes", emoji: "üéµ",
                color: "#7C2D12", hp: 1300, difficulty: 3, powerLevel: 8900,
                description: "Maestro supremo e guardi√£o da express√£o art√≠stica universal",
                phrases: [
                    "A m√∫sica acalma os selvagens... mas voc√™ n√£o ser√° ACALMADO!",
                    "Vou compor uma sinfonia... da sua DERROTA √âPICA!",
                    "Sua arte √© uma desafina√ß√£o... na sinfonia da VIDA!",
                    "Prepare-se para uma √≥pera... TRAGICAMENTE DOLOROSA!"
                ],
                challenges: [
                    {
                        type: "music",
                        question: "√∫sica tonal se baseia em:",
                        options: ["Sons aleat√≥rios", "Ritmo", "Escalas com centro tonal", "Ru√≠dos e sil√™ncio"],
                        correct: 2,
                        timeLimit: 20,
                        difficulty: "hard"
                    },
                    {
                        type: "art",
                        question: "Modernismo no Brasil consolidou-se na:",
                        options: ["Semana de 1922", "Ditadura Militar", "Independ√™ncia", "D√©cada de 1980"],
                        correct: 0,
                        timeLimit: 25,
                        difficulty: "extreme"
                    },
                    {
                        type: "music_theory",
                        question: "Quantas linhas tem uma pauta musical?",
                        options: ["4", "5", "6", "7"],
                        correct: 1,
                        timeLimit: 30,
                        difficulty: "extreme"
                    }
                ]
            },
            {
                id: 15, name: "Jayslenne", subject: "Espanhol", emoji: "üá™üá∏",
                color: "#DC2626", hp: 1500, difficulty: 4, powerLevel: 9600,
                description: "Se√±ora suprema del idioma espa√±ol y guardiana de la cultura hisp√°nica",
                phrases: [
                    "¬°Voy a ense√±arte espa√±ol... a trav√©s del DOLOR INFINITO!",
                    "Tu pronunciaci√≥n es una ofensa a toda Hispanoam√©rica!",
                    "¬°Prep√°rate para conjugar verbos hasta que tu alma GRITE!",
                    "Voy a hacerte hablar espa√±ol... ¬°o MORIR en el intento!"
                ],
                challenges: [
                    {
                        type: "spanish_grammar",
                        question: "¬øCu√°l es correcto: 'Yo ___ estudiante'?",
                        options: ["soy", "estoy", "tengo", "hay"],
                        correct: 0,
                        timeLimit: 20,
                        difficulty: "hard"
                    },
                    {
                        type: "spanish_vocabulary",
                        question: "¬øC√≥mo se dice 'library' en espa√±ol?",
                        options: ["librer√≠a", "biblioteca", "libro", "libreta"],
                        correct: 1,
                        timeLimit: 25,
                        difficulty: "extreme"
                    },
                    {
                        type: "spanish_conjugation",
                        question: "Qual √© um falso cognato?:",
                        options: ["Biblioteca", "Ropa", "Hospital", "Universidad"],
                        correct: 1,
                        timeLimit: 30,
                        difficulty: "extreme"
                    }
                ]
            }
        ];

        function init() {
            createParticleSystem();
            loadGameState();
            generateProfessorGrid();
            updateUI();
            setInterval(createRandomParticle, 500);
        }

        function createParticleSystem() {
            const particleSystem = document.getElementById('particleSystem');
            for (let i = 0; i < 50; i++) {
                createParticle(particleSystem);
            }
        }

        function createParticle(container) {
            const particle = document.createElement('div');
            particle.className = 'particle';
            particle.style.width = Math.random() * 8 + 4 + 'px';
            particle.style.height = particle.style.width;
            particle.style.left = Math.random() * 100 + '%';
            particle.style.animationDelay = Math.random() * 15 + 's';
            particle.style.animationDuration = (10 + Math.random() * 10) + 's';
            
            const colors = ['#ff0080', '#8000ff', '#0080ff', '#00ff80', '#ff8000'];
            const color = colors[Math.floor(Math.random() * colors.length)];
            particle.style.background = color;
            particle.style.boxShadow = `0 0 ${Math.random() * 15 + 5}px ${color}`;
            
            container.appendChild(particle);
            
            setTimeout(() => {
                if (particle.parentNode) {
                    particle.parentNode.removeChild(particle);
                }
            }, 15000);
        }

        function createRandomParticle() {
            const particleSystem = document.getElementById('particleSystem');
            if (particleSystem.children.length < 80) {
                createParticle(particleSystem);
            }
        }

        function showMainMenu() {
            document.getElementById('mainMenu').style.display = 'flex';
            document.getElementById('professorSelect').style.display = 'none';
            document.getElementById('battleArena').style.display = 'none';
            document.getElementById('resultScreen').style.display = 'none';
        }

        function showProfessorSelect() {
            document.getElementById('mainMenu').style.display = 'none';
            document.getElementById('professorSelect').style.display = 'block';
            document.getElementById('battleArena').style.display = 'none';
            generateProfessorGrid();
            updateUI();
        }

        function generateProfessorGrid() {
            const grid = document.getElementById('professorGrid');
            grid.innerHTML = '';
            
            professors.forEach(professor => {
                const isUnlocked = isProfessorUnlocked(professor);
                const isCompleted = gameState.victories.includes(professor.id);
                
                const card = document.createElement('div');
                card.className = `professor-card ${isCompleted ? 'completed' : isUnlocked ? 'unlocked' : 'locked'}`;
                
                if (isUnlocked && !isCompleted) {
                    card.onclick = () => startBattle(professor);
                }

                const randomPhrase = professor.phrases[Math.floor(Math.random() * professor.phrases.length)];
                
                card.innerHTML = `
                    <div class="professor-avatar" style="border-color: ${professor.color}; background: linear-gradient(45deg, ${professor.color}20, ${professor.color}40);">
                        ${isUnlocked ? professor.emoji : 'üîí'}
                    </div>
                    <div class="professor-name">Prof. ${professor.name}</div>
                    <div class="professor-subject" style="color: ${professor.color};">${professor.subject}</div>
                    <div class="professor-description">${professor.description}</div>
                    
                    <div class="professor-stats">
                        <div class="stat-item">
                            <span class="stat-value" style="color: ${professor.color};">${professor.hp}</span>
                            <span class="stat-label">HP</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-value" style="color: ${professor.color};">${professor.powerLevel}</span>
                            <span class="stat-label">Poder</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-value" style="color: ${professor.color};">${'‚≠ê'.repeat(professor.difficulty)}</span>
                            <span class="stat-label">Dificuldade</span>
                        </div>
                    </div>
                    
                    <div style="background: rgba(0,0,0,0.5); padding: 1rem; border-radius: 10px; margin-top: 1rem; border-left: 3px solid ${professor.color};">
                        <div style="font-style: italic; font-size: 0.85rem; color: #ddd; text-align: center;">
                            "${randomPhrase.substring(0, 60)}..."
                        </div>
                    </div>
                    
                    <div style="text-align: center; margin-top: 1rem; font-weight: bold; font-size: 1rem;">
                        ${isCompleted ? '‚úÖ DERROTADO' : isUnlocked ? '‚öîÔ∏è DISPON√çVEL' : 'üîí BLOQUEADO'}
                    </div>
                `;
                
                grid.appendChild(card);
            });
        }

        function isProfessorUnlocked(professor) {
            if (professor.id === 1) return true;
            return gameState.victories.includes(professor.id - 1);
        }

        function startBattle(professor) {
            if (!isProfessorUnlocked(professor)) {
                alert('Este mestre ainda est√° selado! Derrote o anterior primeiro!');
                return;
            }

            gameState.currentBoss = professor;
            gameState.bossHP = professor.hp;
            gameState.bossMaxHP = professor.hp;
            gameState.playerHP = gameState.playerMaxHP;
            gameState.isInBattle = true;
            gameState.currentCombo = 0;
            gameState.battleStats = {
                questionsAnswered: 0,
                correctAnswers: 0,
                criticalHits: 0,
                timeBonus: 0
            };

            document.getElementById('professorSelect').style.display = 'none';
            document.getElementById('battleArena').style.display = 'block';
            setupBattle(professor);
        }

        function setupBattle(professor) {
            const bossElement = document.getElementById('professorBoss');
            bossElement.style.borderColor = professor.color;
            bossElement.style.color = professor.color;
            
            document.getElementById('bossAvatar').textContent = professor.emoji;
            document.getElementById('bossAvatar').style.borderColor = professor.color;
            document.getElementById('bossAvatar').style.background = `linear-gradient(45deg, ${professor.color}40, ${professor.color}80)`;
            
            document.getElementById('bossName').textContent = `MESTRE ${professor.name.toUpperCase()}`;
            document.getElementById('bossSubject').textContent = professor.subject.toUpperCase();
            
            const dialogueContainer = document.getElementById('dialogueContainer');
            dialogueContainer.style.borderColor = professor.color;
            dialogueContainer.style.color = professor.color;
            
            updateBattleUI();
            
            const phrase = professor.phrases[Math.floor(Math.random() * professor.phrases.length)];
            typeText(phrase, () => {
                document.getElementById('startChallengeBtn').style.display = 'block';
            });
        }

        function updateBattleUI() {
            const playerHPPercent = (gameState.playerHP / gameState.playerMaxHP) * 100;
            const bossHPPercent = (gameState.bossHP / gameState.bossMaxHP) * 100;
            
            document.getElementById('playerHPFill').style.width = playerHPPercent + '%';
            document.getElementById('playerHPText').textContent = `${gameState.playerHP}/${gameState.playerMaxHP}`;
            
            document.getElementById('bossHPFill').style.width = bossHPPercent + '%';
            document.getElementById('bossHPText').textContent = `${gameState.bossHP}/${gameState.bossMaxHP}`;
            
            document.getElementById('playerLevelDisplay').textContent = `N√çVEL ${gameState.playerLevel}`;
            
            if (gameState.currentCombo > 0) {
                document.getElementById('comboCounter').style.display = 'block';
                document.getElementById('comboValue').textContent = gameState.currentCombo;
            } else {
                document.getElementById('comboCounter').style.display = 'none';
            }
        }

        function typeText(text, callback) {
            const dialogueElement = document.getElementById('dialogueText');
            const startBtn = document.getElementById('startChallengeBtn');
            
            dialogueElement.innerHTML = '';
            dialogueElement.classList.add('typing-effect');
            startBtn.style.display = 'none';
            
            let i = 0;
            const typeInterval = setInterval(() => {
                if (i < text.length) {
                    dialogueElement.innerHTML += text.charAt(i);
                    i++;
                } else {
                    clearInterval(typeInterval);
                    dialogueElement.classList.remove('typing-effect');
                    if (callback) callback();
                }
            }, 40);
        }

        function startChallenge() {
            document.getElementById('dialogueContainer').style.display = 'none';
            document.getElementById('challengeArena').style.display = 'block';
            
            const professor = gameState.currentBoss;
            const challenge = professor.challenges[Math.floor(Math.random() * professor.challenges.length)];
            gameState.currentChallenge = challenge;
            gameState.timeLeft = challenge.timeLimit;
            
            document.getElementById('challengeTitle').textContent = `DESAFIO DE ${professor.subject.toUpperCase()}`;
            
            generateChallenge(challenge);
            startTimer();
        }

        function generateChallenge(challenge) {
            const content = document.getElementById('challengeContent');
            content.innerHTML = '';

            if (challenge.type === 'calculation' || challenge.answer !== undefined) {
                content.innerHTML = `
                    <div class="math-challenge">
                        <div class="equation-display">${challenge.question}</div>
                        <div class="answer-section">
                            <div class="answer-display" id="answerDisplay">0</div>
                            <div class="number-grid">
                                ${[1,2,3,'C',4,5,6,'‚å´',7,8,9,'.',0,'=','‚àí','+'].map(num =>
                                    `<button class="number-btn" onclick="inputNumber('${num}')">${num}</button>`
                                ).join('')}
                            </div>
                            <button class="menu-btn" onclick="submitMathAnswer()" style="margin-top: 1rem; background: linear-gradient(45deg, #00ff00, #00aa00);">
                                ‚ö° CONFIRMAR RESPOSTA
                            </button>
                        </div>
                    </div>
                `;
            } else {
                content.innerHTML = `
                    <div class="multiple-choice">
                        <div class="question-text">${challenge.question}</div>
                        <div class="options-grid">
                            ${challenge.options.map((option, index) =>
                                `<button class="option-btn" onclick="selectOption(${index})">${option}</button>`
                            ).join('')}
                        </div>
                    </div>
                `;
            }
        }

        let currentAnswer = '';

        function inputNumber(num) {
            if (num === 'C') {
                currentAnswer = '';
                document.getElementById('answerDisplay').textContent = '0';
            } else if (num === '‚å´') {
                currentAnswer = currentAnswer.slice(0, -1);
                document.getElementById('answerDisplay').textContent = currentAnswer || '0';
            } else if (num === '=') {
                submitMathAnswer();
            } else if (num === '‚àí') {
                currentAnswer += '-';
                document.getElementById('answerDisplay').textContent = currentAnswer;
            } else {
                currentAnswer += num;
                document.getElementById('answerDisplay').textContent = currentAnswer;
            }
        }

        function submitMathAnswer() {
            const challenge = gameState.currentChallenge;
            const userAnswer = parseFloat(currentAnswer);
            const correctAnswer = challenge.answer;
            
            clearInterval(gameState.challengeTimer);
            
            let isCorrect = false;
            if (challenge.tolerance) {
                isCorrect = Math.abs(userAnswer - correctAnswer) <= challenge.tolerance;
            } else {
                isCorrect = userAnswer === correctAnswer;
            }
            
            document.getElementById('challengeArena').style.display = 'none';
            processAnswer(isCorrect);
        }

        function selectOption(selectedIndex) {
            const challenge = gameState.currentChallenge;
            const options = document.querySelectorAll('.option-btn');
            
            clearInterval(gameState.challengeTimer);
            
            options.forEach((option, index) => {
                option.onclick = null;
                if (index === challenge.correct) {
                    option.classList.add('correct');
                } else if (index === selectedIndex && index !== challenge.correct) {
                    option.classList.add('incorrect');
                }
            });
            
            setTimeout(() => {
                document.getElementById('challengeArena').style.display = 'none';
                processAnswer(selectedIndex === challenge.correct);
            }, 1500);
        }

        function processAnswer(isCorrect) {
            const professor = gameState.currentBoss;
            gameState.battleStats.questionsAnswered++;
            
            if (isCorrect) {
                gameState.battleStats.correctAnswers++;
                gameState.currentCombo++;
                if (gameState.currentCombo > gameState.maxCombo) {
                    gameState.maxCombo = gameState.currentCombo;
                }
                
                let baseDamage = Math.floor(Math.random() * 120) + 80;
                let comboMultiplier = 1 + (gameState.currentCombo * 0.25);
                let finalDamage = Math.floor(baseDamage * comboMultiplier);
                
                let isCritical = Math.random() < 0.2;
                if (isCritical) {
                    finalDamage *= 2;
                    gameState.battleStats.criticalHits++;
                }
                
                gameState.bossHP = Math.max(0, gameState.bossHP - finalDamage);
                
                showDamageEffect(document.querySelector('.professor-boss'), finalDamage, isCritical ? 'damage-critical' : 'damage-boss');
                
                const message = isCritical ?
                    `CR√çTICO! Dano devastador de ${finalDamage}! Combo ${gameState.currentCombo}x!` :
                    `Excelente! ${finalDamage} de dano! Combo ${gameState.currentCombo}x!`;
                
                document.getElementById('dialogueContainer').style.display = 'block';
                typeText(message, () => {
                    if (gameState.bossHP <= 0) {
                        victory();
                    } else {
                        bossAttack();
                    }
                });
            } else {
                gameState.currentCombo = 0;
                
                let damage = Math.floor(Math.random() * 100) + 60;
                
                const hpPercent = gameState.bossHP / gameState.bossMaxHP;
                if (hpPercent < 0.3) {
                    damage *= 1.6;
                } else if (hpPercent < 0.6) {
                    damage *= 1.3;
                }
                
                damage = Math.floor(damage);
                gameState.playerHP = Math.max(0, gameState.playerHP - damage);
                
                showDamageEffect(document.querySelector('.player-area'), damage, 'damage-player');
                
                document.getElementById('dialogueContainer').style.display = 'block';
                typeText(`Resposta incorreta! Voc√™ recebeu ${damage} de dano! Combo perdido!`, () => {
                    if (gameState.playerHP <= 0) {
                        defeat();
                    } else {
                        bossAttack();
                    }
                });
            }
            
            updateBattleUI();
        }

        function startTimer() {
            const timerFill = document.getElementById('timerFill');
            const timerText = document.getElementById('timerText');
            
            gameState.challengeTimer = setInterval(() => {
                gameState.timeLeft--;
                const percentage = (gameState.timeLeft / gameState.currentChallenge.timeLimit) * 100;
                timerFill.style.width = percentage + '%';
                timerText.textContent = `Tempo: ${gameState.timeLeft}s`;
                
                if (gameState.timeLeft <= 0) {
                    clearInterval(gameState.challengeTimer);
                    document.getElementById('challengeArena').style.display = 'none';
                    processAnswer(false);
                }
            }, 1000);
        }

        function bossAttack() {
            const professor = gameState.currentBoss;
            let damage = Math.floor(Math.random() * 80) + 50;
            
            const hpPercent = gameState.bossHP / gameState.bossMaxHP;
            if (hpPercent < 0.3) {
                damage *= 1.5;
            } else if (hpPercent < 0.6) {
                damage *= 1.2;
            }
            
            damage = Math.floor(damage);
            
            if (Math.random() < 0.25) {
                damage *= 1.8;
            }
            
            gameState.playerHP = Math.max(0, gameState.playerHP - damage);
            showDamageEffect(document.querySelector('.player-area'), damage, 'damage-player');
            
            const attackPhrase = `${professor.name} contra-atacou! ${damage} de dano!`;
            
            setTimeout(() => {
                typeText(attackPhrase, () => {
                    updateBattleUI();
                    if (gameState.playerHP <= 0) {
                        defeat();
                    } else {
                        setTimeout(() => {
                            const nextPhrase = professor.phrases[Math.floor(Math.random() * professor.phrases.length)];
                            typeText(nextPhrase, () => {
                                document.getElementById('startChallengeBtn').style.display = 'block';
                            });
                        }, 2000);
                    }
                });
            }, 1000);
        }

        function showDamageEffect(target, damage, type) {
            const effect = document.createElement('div');
            effect.className = `damage-effect ${type}`;
            effect.textContent = `-${damage}`;
            
            const rect = target.getBoundingClientRect();
            effect.style.left = rect.left + rect.width/2 + 'px';
            effect.style.top = rect.top + 'px';
            effect.style.position = 'fixed';
            
            document.body.appendChild(effect);
            setTimeout(() => effect.remove(), 2000);
        }

        function victory() {
            gameState.victories.push(gameState.currentBoss.id);
            gameState.playerLevel++;
            gameState.playerPower += 150;
            gameState.playerMaxHP += 200;
            gameState.playerHP = gameState.playerMaxHP;
            
            const baseScore = 1500;
            const comboBonus = gameState.maxCombo * 75;
            const accuracyBonus = Math.floor((gameState.battleStats.correctAnswers / gameState.battleStats.questionsAnswered) * 750);
            const criticalBonus = gameState.battleStats.criticalHits * 300;
            const timeBonus = gameState.timeLeft * 15;
            
            const finalScore = baseScore + comboBonus + accuracyBonus + criticalBonus + timeBonus;
            gameState.totalScore += finalScore;
            
            document.getElementById('resultTitle').textContent = 'VIT√ìRIA √âPICA!';
            document.getElementById('resultTitle').className = 'result-title victory-title';
            document.getElementById('resultContent').style.borderColor = '#00ff00';
            
            document.getElementById('resultMessage').innerHTML = `
                üèÜ Voc√™ derrotou o Mestre ${gameState.currentBoss.name}! üèÜ<br>
                <span style="font-size: 1.2rem; color: #00ff00; margin-top: 1rem; display: block;">
                    +150 Poder | +200 HP M√°ximo | N√≠vel ${gameState.playerLevel}
                </span>
            `;
            
            document.getElementById('finalScore').textContent = finalScore;
            document.getElementById('finalCombo').textContent = gameState.maxCombo;
            document.getElementById('finalTime').textContent = gameState.timeLeft + 's';
            
            saveGameState();
            
            if (gameState.victories.length >= 15) {
                setTimeout(() => {
                    document.getElementById('resultTitle').textContent = 'MESTRE SUPREMO UNIVERSAL!';
                    document.getElementById('resultMessage').innerHTML = `
                        üåü PARAB√âNS! VOC√ä DOMINOU TODA A ACADEMIA! üåü<br>
                        <span style="font-size: 1.2rem; color: #ffff00; margin-top: 1rem; display: block;">
                            Voc√™ √© agora o MAIOR ESTUDANTE DO UNIVERSO!<br>
                            Poder Final: ${gameState.playerPower} | N√≠vel: ${gameState.playerLevel}<br>
                            Pontua√ß√£o Total: ${gameState.totalScore}
                        </span>
                    `;
                }, 3000);
            }
            
            document.getElementById('resultScreen').style.display = 'flex';
        }

        function defeat() {
            gameState.defeats++;
            gameState.currentCombo = 0;
            
            document.getElementById('resultTitle').textContent = 'DERROTA √âPICA!';
            document.getElementById('resultTitle').className = 'result-title defeat-title';
            document.getElementById('resultContent').style.borderColor = '#ff0000';
            
            document.getElementById('resultMessage').innerHTML = `
                üíÄ O Mestre ${gameState.currentBoss.name} provou sua superioridade... üíÄ<br>
                <span style="font-size: 1.2rem; color: #ff6666; margin-top: 1rem; display: block;">
                    Mas o conhecimento √© eterno! Estude mais e tente novamente!<br>
                    "O fracasso √© apenas uma oportunidade para recome√ßar com mais intelig√™ncia."
                </span>
            `;
            
            document.getElementById('finalScore').textContent = '0';
            document.getElementById('finalCombo').textContent = gameState.maxCombo;
            document.getElementById('finalTime').textContent = '0s';
            
            saveGameState();
            document.getElementById('resultScreen').style.display = 'flex';
        }

        function continueJourney() {
            gameState.isInBattle = false;
            gameState.playerHP = gameState.playerMaxHP;
            gameState.currentCombo = 0;
            document.getElementById('resultScreen').style.display = 'none';
            showProfessorSelect();
        }

        function fleeBattle() {
            if (confirm('‚ö†Ô∏è Tem certeza que deseja fugir? Voc√™ perder√° 150 de poder e ser√° marcado como covarde!')) {
                gameState.playerPower = Math.max(100, gameState.playerPower - 150);
                gameState.defeats++;
                gameState.currentCombo = 0;
                continueJourney();
            }
        }

        function updateUI() {
            document.getElementById('playerLevel').textContent = gameState.playerLevel;
            document.getElementById('playerPower').textContent = gameState.playerPower;
            document.getElementById('victories').textContent = `${gameState.victories.length}/15`;
            document.getElementById('defeats').textContent = gameState.defeats;
            document.getElementById('maxCombo').textContent = gameState.maxCombo;
        }

        function saveGameState() {
            localStorage.setItem('academiaMestresSupremoDefinitivo', JSON.stringify(gameState));
        }

        function loadGameState() {
            const saved = localStorage.getItem('academiaMestresSupremoDefinitivo');
            if (saved) {
                const savedState = JSON.parse(saved);
                gameState = { ...gameState, ...savedState };
            }
        }

        function resetAllProgress() {
            if (confirm('‚ö†Ô∏è ATEN√á√ÉO SUPREMA! Isso apagar√° TODO seu progresso √©pico! Tem absoluta certeza?')) {
                if (confirm('üî• √öLTIMA CHANCE! Voc√™ realmente quer destruir sua jornada heroica?')) {
                    localStorage.removeItem('academiaMestresSupremoDefinitivo');
                    gameState = {
                        playerLevel: 1,
                        playerPower: 100,
                        playerHP: 500,
                        playerMaxHP: 500,
                        victories: [],
                        defeats: 0,
                        maxCombo: 0,
                        currentBoss: null,
                        bossHP: 1000,
                        bossMaxHP: 1000,
                        challengeTimer: null,
                        timeLeft: 30,
                        currentChallenge: null,
                        isInBattle: false,
                        currentCombo: 0,
                        totalScore: 0,
                        battleStats: {
                            questionsAnswered: 0,
                            correctAnswers: 0,
                            criticalHits: 0,
                            timeBonus: 0
                        }
                    };
                    generateProfessorGrid();
                    updateUI();
                    alert('üåü Universo resetado! Sua nova jornada √©pica come√ßa AGORA!');
                }
            }
        }

        function showInstructions() {
            alert(`‚öîÔ∏è MANUAL DO GUERREIRO - ACADEMIA DOS MESTRES SUPREMOS ‚öîÔ∏è

üéØ MISS√ÉO SUPREMA:
‚Ä¢ Derrote todos os 15 mestres supremos em combate √©pico
‚Ä¢ Cada mestre possui HP √∫nico, ataques devastadores e frases lend√°rias
‚Ä¢ Responda perguntas complexas para causar dano massivo
‚Ä¢ Torne-se o MESTRE SUPREMO UNIVERSAL!

‚öîÔ∏è SISTEMA DE COMBATE √âPICO:
‚Ä¢ HP dos mestres: 1200-1800 (EXTREMAMENTE ALTO!)
‚Ä¢ Seu HP aumenta +200 a cada vit√≥ria
‚Ä¢ Respostas corretas = 80-300+ de dano (com combo)
‚Ä¢ Respostas erradas = 60-160 de dano recebido
‚Ä¢ Timer agressivo: 15-35 segundos por pergunta
‚Ä¢ Sistema de COMBO: +25% dano por acerto consecutivo

üî• MEC√ÇNICAS AVAN√áADAS:
‚Ä¢ CR√çTICOS: 20% chance de dano duplo
‚Ä¢ ATAQUES ESPECIAIS: Mestres usam 25% das vezes
‚Ä¢ F√öRIA: Mestres ficam mais fortes com HP baixo
‚Ä¢ COMBO SYSTEM: Multiplicador de dano por sequ√™ncia
‚Ä¢ POWER SCALING: Cada vit√≥ria te deixa mais forte

üíÄ DIFICULDADE EXTREMA:
‚Ä¢ 15 mestres √∫nicos com personalidades √©picas
‚Ä¢ Perguntas espec√≠ficas e conhecimento profundo
‚Ä¢ Frases intimidadoras e ataques tem√°ticos
‚Ä¢ Sistema de fuga com penalidade severa (-150 poder)
‚Ä¢ Progress√£o lenta mas recompensadora

üèÜ SISTEMA DE RANKING:
‚Ä¢ Mestre Supremo Universal: 15/15 vit√≥rias
‚Ä¢ Lenda Acad√™mica: 12+ vit√≥rias
‚Ä¢ Guerreiro do Conhecimento: 8+ vit√≥rias
‚Ä¢ Estudante Avan√ßado: 5+ vit√≥rias
‚Ä¢ Aprendiz Corajoso: 1+ vit√≥rias

‚ö° ESTRAT√âGIAS SUPREMAS:
‚Ä¢ Mantenha combos altos para dano m√°ximo
‚Ä¢ Estude as mat√©rias antes das batalhas
‚Ä¢ Respostas r√°pidas evitam ataques extras
‚Ä¢ Cada mestre tem padr√µes √∫nicos
‚Ä¢ Use o tempo sabiamente - cada segundo conta

BOA SORTE, GUERREIRO SUPREMO DO CONHECIMENTO! üî•‚öîÔ∏èüåü`);
        }

        function showHallOfFame() {
            const winRate = gameState.victories.length + gameState.defeats > 0 ?
                ((gameState.victories.length / (gameState.victories.length + gameState.defeats)) * 100).toFixed(1) : 0;
            
            let rank = 'Iniciante';
            let rankEmoji = 'üìö';
            if (gameState.victories.length >= 15) {
                rank = 'üåü MESTRE SUPREMO UNIVERSAL';
                rankEmoji = 'üåü';
            } else if (gameState.victories.length >= 12) {
                rank = 'üèÜ LENDA ACAD√äMICA';
                rankEmoji = 'üèÜ';
            } else if (gameState.victories.length >= 8) {
                rank = '‚öîÔ∏è GUERREIRO DO CONHECIMENTO';
                rankEmoji = '‚öîÔ∏è';
            } else if (gameState.victories.length >= 5) {
                rank = 'ü•á ESTUDANTE AVAN√áADO';
                rankEmoji = 'ü•á';
            } else if (gameState.victories.length >= 1) {
                rank = 'ü•â APRENDIZ CORAJOSO';
                rankEmoji = 'ü•â';
            }

            alert(`üèÜ HALL DA FAMA √âPICO - SUAS CONQUISTAS SUPREMAS üèÜ

${rankEmoji} CLASSIFICA√á√ÉO ATUAL: ${rank}

üìä ESTAT√çSTICAS DE PODER:
üéì N√≠vel Supremo: ${gameState.playerLevel}
‚ö° Poder C√≥smico: ${gameState.playerPower}
‚ù§Ô∏è HP M√°ximo: ${gameState.playerMaxHP}
üåü Pontua√ß√£o Total: ${gameState.totalScore}

‚öîÔ∏è HIST√ìRICO DE BATALHAS √âPICAS:
üèÜ Vit√≥rias Gloriosas: ${gameState.victories.length}/15
üíÄ Derrotas Honrosas: ${gameState.defeats}
üìà Taxa de Vit√≥ria: ${winRate}%
üî• Combo M√°ximo: ${gameState.maxCombo}x

üéñÔ∏è MESTRES DERROTADOS:
${gameState.victories.length > 0 ? 
    professors.filter(p => gameState.victories.includes(p.id))
        .map(p => `‚öîÔ∏è Mestre ${p.name} (${p.subject}) - Poder: ${p.powerLevel}`)
        .join('\n') :
    'üíÄ Nenhum mestre derrotado ainda... A jornada √©pica te aguarda!'
}

${gameState.victories.length >= 15 ?
    'üåüüèÜüåü PARAB√âNS! VOC√ä √â O MESTRE SUPREMO UNIVERSAL! üåüüèÜüåü' :
    `üí™ Continue sua jornada √©pica! Faltam ${15 - gameState.victories.length} mestres para a gl√≥ria suprema!`
}

üî• "O conhecimento √© poder, e o poder √© eterno!" üî•`);
        }

        window.onload = init;
    </script>
</body>
</html>
